{"cacheVersion":37,"page":{"id":"5fe5c8f2-4c38-4459-b722-48bf993cfd52","paths":{"de":"staff-profile-popup","default":"staff-profile-popup"},"cmsDataSetPath":null,"workflows":[{"id":"6c797370-f6c7-4044-9109-370adcedc66b","actions":{"b3b41cfd-a7a0-4cc3-92a8-295d6ff919c2":{"id":"b3b41cfd-a7a0-4cc3-92a8-295d6ff919c2","type":"fetch-collections","collectionsId":["cc215fad-c61a-4270-9a1b-b50c3b1bfcc9"]}},"trigger":"onload","firstAction":"b3b41cfd-a7a0-4cc3-92a8-295d6ff919c2"},{"id":"67dd570b-b7bc-4b18-aeb6-5145142e6c60","name":"Setup Edit Lesson Event Listener","actions":{"ae39aa43-6dfe-4f6c-b164-1fdc1a1776c2":{"id":"ae39aa43-6dfe-4f6c-b164-1fdc1a1776c2","code":"// Set up event listener for the editLesson custom event\nconst handleEditLessonEvent = async (event) => {\n  const lessonData = event.detail;\n  console.log('editLesson event received with data:', lessonData);\n  \n  // Call the global function to handle the edit lesson workflow\n  await utilsFunctions.executeGlobalFunction['2d6bf9cd-979d-44a9-9297-895f6f482582'](lessonData);\n};\n\n// Add event listener\nconst doc = wwLib.getFrontDocument();\ndoc.addEventListener('editLesson', handleEditLessonEvent);\n\n// Store the function reference for cleanup\nvariables['edit_lesson_event_handler'] = handleEditLessonEvent;\n\nconsole.log('Edit lesson event listener set up successfully');","next":null,"type":"custom-js"}},"trigger":"onload","description":"Sets up the event listener for the editLesson custom event","firstAction":"ae39aa43-6dfe-4f6c-b164-1fdc1a1776c2","firstErrorAction":null},{"id":"e9256341-7936-42df-9fcf-8ef0e7c3ab9e","name":"Cleanup Edit Lesson Event Listener","actions":{"697409af-be4b-4288-a30d-c21ba9b29796":{"id":"697409af-be4b-4288-a30d-c21ba9b29796","code":"// Clean up event listener when page unloads\nconst doc = wwLib.getFrontDocument();\nconst handler = variables['edit_lesson_event_handler'];\n\nif (handler) {\n  doc.removeEventListener('editLesson', handler);\n  console.log('Edit lesson event listener removed');\n}","next":null,"type":"custom-js"}},"trigger":"page-unload","description":"Removes the event listener for the editLesson custom event","firstAction":"697409af-be4b-4288-a30d-c21ba9b29796","firstErrorAction":null},{"id":"8dd9150b-163f-4f52-bfff-57c873b18055","name":"Initialize Text Visibility","actions":{"c766f430-ba09-493a-b970-242b0da36f21":{"id":"c766f430-ba09-493a-b970-242b0da36f21","code":"// Initialize the text visibility to false when the page loads\nvariables[\"c33a5e12-1cbb-46cd-844d-76f063cb8905\"] = false;","next":null,"type":"custom-js"}},"trigger":"onload","description":"Sets the initial state of the text visibility variable","firstAction":"c766f430-ba09-493a-b970-242b0da36f21","firstErrorAction":null}]},"sections":{},"wwObjects":{},"collections":[{"id":"cc215fad-c61a-4270-9a1b-b50c3b1bfcc9","designId":"d93a1b88-4f83-4782-a4d6-6bc9db5c53b3","settingsId":"1380fd5e-642d-426e-880f-d81769a573e6","pluginId":"f9ef41c3-1c53-4857-855b-f2f6a40b7186","type":"single","name":"Periods","displayBy":null,"lastSyncDate":null,"config":{"table":"schedule_periods","dataFields":[],"fieldsMode":"guided","isAutoFetch":true,"primaryData":["id"],"isPersistentOnNav":true,"dataFieldsAdvanced":""},"error":null,"limit":null,"mode":"dynamic","filter":[],"sort":[],"isSyncing":false,"needSync":false,"fields":{},"folder":"Structure/","description":null,"createdAt":"2025-05-12T08:28:01.998Z","updatedAt":"2025-07-05T15:40:36.770Z","data":{}}],"variables":[{"id":"c33a5e12-1cbb-46cd-844d-76f063cb8905","type":"boolean","name":"isTextVisible","defaultValue":false,"isLocalStorage":false,"isPersistentOnNav":true}],"workflows":[{"id":"2d6bf9cd-979d-44a9-9297-895f6f482582","parameters":[{"name":"lessonData","type":"object","defaultValue":{}}],"actions":{"a70aed06-422d-4b80-ab70-66e9296382c1":{"id":"a70aed06-422d-4b80-ab70-66e9296382c1","code":"// Process the lesson data received from the editLesson event\n  console.log('Processing lesson data in global function:', context.parameters['lessonData']);\n  \n  // Here you can implement your custom logic for handling the edit lesson workflow\n  // For example, you might want to:\n  // 1. Open a form popup with the lesson data pre-filled\n  // 2. Navigate to an edit page with the lesson data\n  // 3. Update some global variables to trigger UI changes\n  \n  // Example: Update a global variable with the lesson data to be edited\n  variables['lesson_to_edit'] = context.parameters['lessonData'];\n  \n  // Return the processed data if needed\n  return {\n    success: true,\n    message: 'Lesson edit initiated',\n    data: context.parameters['lessonData']\n  };","next":null,"type":"custom-js"}},"firstAction":"a70aed06-422d-4b80-ab70-66e9296382c1","firstErrorAction":null}],"formulas":[],"libraryComponents":[]}